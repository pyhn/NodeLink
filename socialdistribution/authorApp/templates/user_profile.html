<!DOCTYPE html>
<html lang="en">
{% extends 'base.html' %} {% block title %}Home - SocialDistribution{% endblock %} {% block content %}

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SocialDistribution</title>
</head>

<body>
    <div class='personal_profile'>
        <div id="user_info">
            <span class="user_icon large"><img
                    src={{author.user.profileImage}}></span><!--!!!add anchor to user account-->
            <h1> {{author.user.displayName}}</h1>
            <h4> @{{author.user.username}}</h4>

            <span id="user_stats">
                <h2>{{num_friends}} friends</h2>
                <h2>{{num_followers}} followers</h2>
                <h2>{{num_following}} following</h2>
            </span>
            {% if user.author_profile != author %}
            {% if button_type == "unfriend" %}
            <span id="user_fri/fol">
                <form method="post" action="{% url 'authorApp:unfriend' author.id %}">
                    {% csrf_token %}
                    <button type="submit">Unfriend</button>
                </form>
            </span>
            {% elif button_type == "unfollow/accept_or_deny" %}
            <span id="user_fri/fol">
                <form method="post" action="{% url 'authorApp:follow_author' author.id %}">
                    {% csrf_token %}
                    <button type="submit">Unfollow</button>
                </form>
                <form method="post" action="{% url 'authorApp:accept_follow_request' ff_request.id %}">
                    {% csrf_token %}
                    <button type="submit">Accept</button>
                </form>
                <form method="post" action="{% url 'authorApp:deny_follow_request' ff_request.id %}">
                    {% csrf_token %}
                    <button type="submit">Deny</button>
                </form>
            </span>
            {% elif button_type == "unfollow" %}
            <span id="user_fri/fol">
                <form method="post" action="{% url 'authorApp:follow_author' author.id %}">
                    {% csrf_token %}
                    <button type="submit">Unfollow</button>
                </form>
            </span>
            {% elif button_type == "accept_or_deny" %}
            <span id="user_fri/fol">
                <form method="post" action="{% url 'authorApp:accept_follow_request' ff_request.id %}">
                    {% csrf_token %}
                    <button type="submit">Accept</button>
                </form>
                <form method="post" action="{% url 'authorApp:deny_follow_request' ff_request.id %}">
                    {% csrf_token %}
                    <button type="submit">Deny</button>
                </form>
            </span>
            {% elif button_type == "pending" %}
            <span id="user_fri/fol">
                <button disabled>Pending</button>
            </span>
            {% else %}
            <span id="user_fri/fol">
                <form method="post" action="{% url 'authorApp:follow_author' author.id %}">
                    {% csrf_token %}
                    <button type="submit">Follow</button>
                </form>
            </span>
            {% endif %}
            {%endif%}


        </div>

        <div id ="user_posts">

            <main>
                {%for p in all_ids%}
                <div hx-get="{%url 'postApp:one_post' request.user.username p.uuid %}" hx-trigger="load" hx-target="#number-{{p.uuid}}"
                    hx-swap="innerHTML">
                    <div class="post-container">
                        <p id='number-{{ p.uuid }}'></p>
                    </div>


                    {% endfor %}
            </main>
        </div>
    </div>
</body>
{% endblock %}

</html>
